# Para baixar as fontes reais e gerar sha256sums corretos, se você quiser preencher automaticamente.
40-update-manager.sh update-meta-token apps/bash

# Instalsr o cross-tollchain 
adm install sys/cross-toolchain

# Somente o stage1
ADM_PROFILE=minimal-toolchain $ADM_SCRIPTS/20-toolchain-stage1.sh

# Para instalar tudo de uma vez
ADM_PROFILE=minimal-toolchain adm install sys/temp-tools-stage1

# kernels
ADM_PROFILE=normal-system ADM_KERNEL_CONFIG_DIR=/usr/src/adm/kconfig adm install sys/linux-xanmod
ADM_PROFILE=normal-system adm install sys/linux
ADM_PROFILE=aggressive-system adm install sys/linux-liquorix

# Instalar firmware completo
adm install sys/linux-firmware

# Em máquina Intel (com imagem de microcode):
ADM_INTEL_UCODE_CREATE_IMAGE=1 adm install sys/intel-microcode

# Em máquina AMD:
ADM_AMD_UCODE_CREATE_IMAGE=1 adm install sys/amd-microcode

# Passos pra instalar grub com firmware e microcodes
adm install sys/linux-firmware

# Intel:
ADM_INTEL_UCODE_CREATE_IMAGE=1 adm install sys/intel-microcode

# AMD:
ADM_AMD_UCODE_CREATE_IMAGE=1 adm install sys/amd-microcode

# Isso cria, por exemplo: /boot/intel-ucode.img ou /boot/amd-ucode.img
# Depois instala e integra o GRUB:
ADM_GRUB_INSTALL_BOOTLOADER=1 ADM_GRUB_DEVICE=/dev/sda adm install sys/grub

# O hook vai: criar /etc/grub.d/06_adm_microcode; rodar grub-mkconfig já sabendo que tem aquelas imagens;


# Comando para instalar cross-toolchain
adm install sys/cross-toolchain-pass1 --root=/usr/src/adm/cross-toolchain

# Já dentro do chroot seguro:
adm install sys/cross-toolchain-pass2

# já dentro do chroot, libc instalada (glibc OU musl):
adm install sys/base-system

# Fluxo geral sugerido (bem resumido)# Fora do chroot (host):
adm install sys/cross-toolchain-pass1 --root=/usr/src/adm/cross-toolchain

# Cria rootfs, entra no chroot, constrói PASS2:
# dentro do chroot
adm install sys/cross-toolchain-pass2


# Constrói adicionais temporary tools e depois a base:(se quiser, você pode ter temp-tools-stage1 / temp-tools-stage2 como já geramos antes)

# Quando pronto:
adm install sys/base-system

# Você pode editar:
/usr/src/adm/profiles/aggressive.profile
/usr/src/adm/profiles/normal.profile
/usr/src/adm/profiles/minimal.profile
/usr/src/adm/profiles/custom.profile

# Depois, sempre que você fizer:
adm profile aggressive Ou: adm build x11/mesa

# Todas essas otimizações já estarão ativas automaticamente.
# Variáveis para instalar xf86-input-libinput

# otimizações Mesa
export ADM_MESA_USE_NATIVE=1
export ADM_MESA_BUILD_TYPE=release
export ADM_MESA_GALLIUM_DRIVERS="radeonsi,nouveau,swrast"
export ADM_MESA_VK_DRIVERS="intel,amd"

# otimizações Intel
export ADM_INTEL_TEARFREE=1
export ADM_INTEL_ACCEL_METHOD=sna

# libinput tuning
export ADM_LIBINPUT_TAP_DEFAULT=1
export ADM_LIBINPUT_NATURAL_SCROLL=1
export ADM_LIBINPUT_DISABLE_WHILE_TYPING=1

# Instalar wm
# Exemplo: padrão = xfce4
export ADM_DEFAULT_WM=xfce4
# ou:
export ADM_DEFAULT_WM=i3

# E depois instalar
adm install x11/wm-defaults

# Fonte sans padrão = Noto Sans
export ADM_FONT_SANS_DEFAULT="Noto Sans"

# Fonte monospace padrão = JetBrains Mono
export ADM_FONT_MONO_DEFAULT="JetBrains Mono"

# Desligar ligaduras globalmente, se quiser
# export ADM_FONT_ENABLE_LIGATURES=0

# Instalar
adm install fonts/font-defaults
