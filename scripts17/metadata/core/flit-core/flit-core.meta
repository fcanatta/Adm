# Flit-Core-3.12.0 — LFS r12.4-46, Capítulo 8.54

PKG_NAME="flit-core"
PKG_VERSION="3.12.0"
PKG_RELEASE=1

PKG_DESCRIPTION="Flit-core provides the distribution-building parts of Flit (Python packaging tool)."

PKG_HOMEPAGE="https://pypi.org/project/flit-core/"
PKG_SOURCE_URLS=(
    "https://pypi.org/packages/source/f/flit-core/flit_core-${PKG_VERSION}.tar.gz"
)

PKG_MD5S=(
    "c538415c1f27bd69cbbbf3cdd5135d39"
)

PKG_DEPENDS=("python")
PKG_GROUPS=()

PKG_UPSTREAM_URL="https://pypi.org/simple/flit-core/"
PKG_UPSTREAM_REGEX='flit_core-([0-9.]+)\.tar\.gz'


PKG_BUILD() {
    # Mesmo comando do LFS (gera o wheel em ./dist)
    pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps "$PWD"
}

PKG_INSTALL() {
    # LFS: pip3 install --no-index --find-links dist flit_core
    # Aqui adaptado para instalar dentro de DESTDIR:
    pip3 install \
        --no-index \
        --no-user \
        --find-links dist \
        --root "${DESTDIR}" \
        --prefix /usr \
        flit_core
}
