# Bison-3.8.2 - LFS r12.4-46 (8.35)
# https://www.linuxfromscratch.org/lfs/view/development/chapter08/bison.html

PKG_NAME="bison"
PKG_VERSION="3.8.2"
PKG_RELEASE=1

PKG_SOURCE_URLS=(
  "https://ftp.gnu.org/gnu/bison/bison-3.8.2.tar.xz"
)

# MD5 do LFS
# bison-3.8.2.tar.xz -> c28f119f405a2304ff0a7ccdcc629713
PKG_MD5S=(
  "c28f119f405a2304ff0a7ccdcc629713"
)

PKG_DEPENDS=()   # m4 já deve existir no sistema, mas o livro não lista como dependência aqui
PKG_GROUPS=("devel")

PKG_UPSTREAM_URL="https://www.gnu.org/software/bison/"
PKG_UPSTREAM_REGEX='bison-([0-9.]+)\.tar\.xz'

PKG_BUILD() {
    ./configure --prefix=/usr \
                --docdir=/usr/share/doc/bison-3.8.2

    make

    if [[ "${ADM_RUN_TESTS:-1}" -eq 1 ]]; then
        make check
    fi
}

PKG_INSTALL() {
    make DESTDIR="$DESTDIR" install
}
