#!/usr/bin/env bash
# ADM HOOK: binutils pre-install
# Cria diretÃ³rios necessÃ¡rios e prepara DESTDIR

set -euo pipefail

echo "ðŸ“¦ [binutils pre-install] Preparando instalaÃ§Ã£o..."

DESTDIR="${DESTDIR:-/usr/src/adm/tmp/binutils-destdir}"
PREFIX="${PREFIX:-/usr}"

mkdir -p "$DESTDIR/$PREFIX/bin" "$DESTDIR/$PREFIX/lib" "$DESTDIR/$PREFIX/share/info"

if [ "${DRY_RUN:-0}" -eq 1 ]; then
  echo "(dry-run) simulando make install"
else
  make install DESTDIR="$DESTDIR"
fi

echo "âœ… [binutils pre-install] Arquivos instalados em $DESTDIR"
