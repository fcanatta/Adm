#!/usr/bin/env bash
set -Eeuo pipefail
: "${WORKDIR:?}"

cd "$WORKDIR"
srcdir="$(find . -maxdepth 1 -type d -name 'ncurses-*' | head -n1 || true)"
[[ -n "$srcdir" ]] || { echo "[ERR] diretório ncurses-* não encontrado em $WORKDIR" >&2; exit 2; }

cd "$srcdir"

# wide-char, shared, pc-files, sem debug/normal redundante
./configure \
  --prefix=/usr \
  --mandir=/usr/share/man \
  --with-shared \
  --without-debug \
  --without-normal \
  --enable-widec \
  --enable-pc-files \
  --with-pkg-config-libdir=/usr/lib/pkgconfig
